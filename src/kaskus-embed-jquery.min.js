(function(e){e.fn.kaskusEmbed=function(t){var n=e.extend({serverUrl:"/assets/",styleDark:0},t);return this.each(function(t,r){var i=e(this);if(!i.attr("data-embed")=="kaskus"){return}if(!e("head .style-kaskus-badge")[0]){e("head").append('<link rel="stylesheet" class="style-kaskus-badge" href="'+n.serverUrl+'card-styling.css"/>')}i.after('<div id="badge-kaskus_'+t+'" class="badge-kaskus-very-outer"/>');i.next().html("<h1>Loading...</h1>");if(!i.attr("src").split("http://www.kaskus.co.id/show_post/")[1]){return}i.css({width:"0",border:"0",height:"0"}).attr({"data-id":"frame_"+t}).load(function(){i.next().html('<div class="kaskus-card-outer"> <header> <h1> <a href="#"><img src="'+n.serverUrl+'home-logo.png"/></a> </h1> <a href="#" id="quote-src" target="_blank"><i class="icon-quote-left"></i> Quote</a> </header> <div class="stripline"> <p id="post_title"><a href="#">%title%</a></p> <time id="post_time">%date%</time> </div> <div class="vcard"> <figure> <img id="avatar_src" src="#"> </figure> <div class="detail"> <p id="username"><a href="#">%username%</a></p> <p id="slug">%role%</p> <div class="static"> </div> </div> <div class="cendol"> <ul title="% akan menjadi terkenal" class=""> </ul> </div> </div> <div class="content"> </div> </div>');var t=i.attr("src").split("/show_post/")[1];var r=encodeURIComponent("http://www.kaskus.co.id/show_post/"+t);e.ajax({url:"http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22"+r+"%22%20and%0A%20%20%20%20%20%20xpath%3D'%2F%2Fdiv%5B%40id%3D%22main%22%5D%2Fdiv%5B%40class%3D%22row%22%5D'&diagnostics=false",cache:true,dataType:"html"}).done(function(t){var r="http://kaskus.co.id";var s={};var o=e(t).find(".row .breadcrumbs a");var u=e(t).find(".row:eq(1) .col .row .col .row .col");var a=e(u).find(".vcard");s.judul=o.html();s.link=r+o.attr("href");s.date_post=e(u).find(">p").html();s.post_id=e(u).find(".entry-head .permalink a strong").html();s.img_url=e(a).find("img.photo").attr("src");s.username=e(a).find(".user-details >a").html();s.username_href=r+e(a).find(".user-details >a").attr("href");s.role=e(a).find(".title p").html();s.user_id=e(a).find(".meta div:eq(0) p").html();s.join_date=e(a).find(".meta div:eq(1) p").html();s.total_post=e(a).find(".meta div:eq(2) p").html();s.cendol=e(a).find(".cendol img").length;s.cendol_desc=e(a).find(".cendol").attr("title");if(e(a).find(".cendol img").attr("src")=="http://kkcdn-static.kaskus.co.id/themes_2.0/img/icon/reputation_pos.gif"){s.cendol_type=1}else{s.cendol_type=0}if(e(a).find(".control ul li:eq(0) a img").attr("src")=="http://kkcdn-static.kaskus.co.id/themes_2.0/img/icon/status_online.png"){s.online=1}else{s.online=0}s.content=e(u).find(".entry");s.quote=r+e(u).find(".user-tools a").attr("href");if(!s.username||!s.content){i.next().html("<h1>Post Not found Or Overposting</h1>");return}e(i).next().find("#quote-src").attr("href",s.quote);e(i).next().find("#post_title a").html(s.judul).attr("href",s.link);e(i).next().find("#post_time").html(s.date_post);e(i).next().find("#avatar_src").attr("src",s.img_url);e(i).next().find("#username a").attr("href",s.username_href).html(s.username);e(i).next().find("#slug").html(s.role);e(i).next().find(".static").html("<p><span>Post</span>"+s.total_post+"</p>");e(i).next().find(".static").append("<p><span>Join</span>"+s.join_date+"</p>");e(i).next().find(".static").append("<p><span>UserID</span>"+s.user_id+"</p>");if(s.cendol_type=1){var f="cendol-gan"}else{var f="bata"}e(i).next().find(".cendol ul").addClass(f).attr("title",s.cendol_desc);for(var l=0;l<s.cendol;l++){e(i).next().find(".cendol ul").append("<li></li>")}e(s.content).find('input[type="button"]').removeAttr("onclick");e(s.content).find(".post-quote > span a.jump").attr("",function(){var t=e(this).attr("href");e(this).attr({href:"http://www.kaskus.co.id"+t,target:"_blank"})});e(i).next().find(".content").html(s.content).find('input[type="button"]').click(function(){if(e(this).val()=="Show"){e(".content_"+e(this).attr("class")).slideDown(0);e(this).html("").val("Hide")}else{e(".content_"+e(this).attr("class")).slideUp(0);e(this).html("").val("Show")}});e(i).next().find(".kaskus-card-outer").fadeIn();e(i).next().find("header h1 a img").attr("src",n.serverUrl+"home-logo.png")}).fail(function(){i.next().html("<h1>Post Not found Or Overposting</h1>");return})})})}})(jQuery)